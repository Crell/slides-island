<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Getting off the Island</title>
    <link rel="stylesheet" href="components/require.css" />
    <link rel="stylesheet" href="components/revealjs/css/theme/default.css" />
    <link rel="stylesheet" href="components/revealjs/lib/css/zenburn.css" />
    <style>
      .top-align {
        position: absolute;
        top: -6em;
      }
      h1.inverse,
      h2.inverse,
      h3.inverse,
      h4.inverse,
      p.inverse {
        color: #000;
      }
      .reveal pre {
        width: 100%;
      }

      dl.bullets {
        text-align: left;
        padding-left: 3em;
      }
      dl.bullets dt {
        font-weight: bold;
        color: #99cc99;
      }
      dl.bullets dd {
        text-indent: 50px;
        background-repeat: no-repeat;
      }
      dl.bullets dd.done {
        background-image: url('assets/checkmark.svg');
        background-size: 40px 40px;
        color: #17ff2e;
      }

    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>Off the Island</h1>
          <p>
            <small>Presented by <a href="http://www.garfieldtech.com/">Larry Garfield</a></small>
          </p>
        </section>
        <section>
          <h2><a href="http://twitter.com/Crell">@Crell</a></h2>
          <img src="assets/palantirnet-logo-2013.svg" alt="Palantir.net Pays me!" style="width: 300px; background: #FFF; float: right;" />
          <ul>
            <li>Senior Architect, <a href="http://www.palantir.net/">Palantir.net</a></li>
            <li>Drupal 8 Web Services Lead</li>
            <li>Drupal Representative, <a href="http://www.php-fig.org/">PHP-FIG</a></li>
            <li>Advisor, Drupal Association</li>
            <li>General busybody</li>
          </ul>
        </section>
        <section>
          <section>
            <h2>Pollution</h2>
            <img src="assets/pollution.jpg" alt="Pollution in the world" data-credit="http://walshearthsciences.wikispaces.com/Environmental+Science" />
          </section>
          <section>
            <img src="assets/computer-junk.jpg" alt="Pollution in the computer world" data-credit="http://www.flickr.com/photos/pollas/1137668349/" />
          </section>
          <section>
            Too much code.
          </section>
          <section>
            <h3><q>No Silver Bullet</q></h3>
            <h4>1986</h4>
            <div style="float: left; width: 40%;">
              <img src="assets/fred-brooks.jpg" style="min-width: 40%" alt="Fred Brooks" data-credit="https://en.wikipedia.org/wiki/File:Fred_Brooks.jpg" />
            </div>
            <div style="float: right; width: 40%;">
              <img src="assets/mythical-man-month.jpg" style="min-width: 300px" alt="The Mythical Man Month" data-credit="https://en.wikipedia.org/wiki/File:Mythical_man-month_%28book_cover%29.jpg" />
            </div>
          </section>
          <section>
            "No Silver Bullet", 1986.
          </section>
          <section>
            Quote about COTS.
          </section>
          <section>
            <p>Hey, look, Open Source!</p>
            <img src="assets/osi-symbol.png" style="width: 50%;" alt="The logo of the Open Source Initiative" data-credit="http://opensource.org/" />
          </section>
          <section>
            Sharing!
          </section>
        </section>
        <section>
          <section>
            <h2>The olden days</h2>
          </section>
          <section>
            <h2>PEAR</h2>
            <img src="assets/pear.gif" alt="PEAR" style="background: none; border: none; position: absolute; bottom:0; right:0; z-index:-1000;">
            <ul>
              <li class="fragment">PHP Extension and Application Repository</li>
              <li class="fragment">Founded 2000 on the "new" PHP 4</li>
              <li class="fragment">Required root to use properly (WTF?)</li>
              <li class="fragment">Complex process for adding packages</li>
              <li class="fragment">Easy to get wrong</li>
            </ul>
          </section>
          <section>
            <h3>Why we can't have nice things</h3>
            <dl class="bullets">
              <dt class="fragment">Where do I find code?</dt>
              <dd class="fragment">PEAR and, um, blogs?</dd>
              <dt class="fragment">How do I get code?</dt>
              <dd class="fragment">Paste into your repository (or have root)</dd>
              <dt class="fragment">How do I load your code?</dt>
              <dd class="fragment">Manual includes</dd>
              <dt class="fragment">How do I load everyone's code?</dt>
              <dd class="fragment">Lots of manual includes</dd>
              <dt class="fragment">Name clashes?</dt>
              <dd class="fragment">YourProject_Before_Every_Single_Function()</dd>
              <dt class="fragment">How can I collaborate on code?</dt>
              <dd class="fragment">Sourceforge?</dd>
              <dt class="fragment">Can I exchange code?</dt>
              <dd class="fragment">LOLz</dd>
            </dl>
          </section>
          <section>
            <h2>Result</h2>
            <p>This is my island</p>
            <p class="fragment">There are many like it, but this one is mine</p>
          </section>

          <section>
            <img src="assets/downloads-drupal.png" alt="Drupal.org download page" />
            <p class="fragment">2% of the web cares</p>
          </section>
          <section>
            <img src="assets/downloads-joomla.png" alt="Joomla.org download page" />
            <p class="fragment">3% of the web cares</p>
          </section>
          <section>
            <img src="assets/downloads-wordpress.png" alt="Wordpress.org download page" />
            <p class="fragment">18% of the web cares</p>
          </section>
          <section>
            <img src="assets/downloads-cakephp.png" alt="CakePHP download page" />
            <p class="fragment">Who cares?</p>
          </section>
          <section>
            <p>This was the best we could do</p>
            <p style="margin-top: 1em;"><q class="fragment">NIH is normal</q></p>
          </section>
          <section>
            <h3>PHP</h3>
            <img src="assets/elephpant-alliance.jpg" style="width: 80%" alt="PHP is the web" data-credit="http://www.flickr.com/photos/dragonbe/3411273755/" />
            <div class="fragment">
              <p>80% of the web cares</p>
              <small>Source: <a href="http://w3techs.com/technologies/history_overview/programming_language">W3Techs</a></small>
            </div>
          </section>
          <section>
            <q>The average PHP programmer has written 2.5<br />frameworks in his career.</q>
            <p>&mdash; Urban legend statistics</p>
          </section>
          <section>
            <q>You're not a real PHP developer until you've written your own CMS.</q>
          </section>
        </section>
        <section>
          <h3>That was then</h3>
          <p class="fragment">PHP is 18 years old</p>
          <p class="fragment roll-in">and is finally growing up</p>
        </section>
        <section>
          <section>
            <h1>Step 0</h1>
          </section>
          <section>
            <h2>Class autoloading</h2>
            <h3>PHP 5.0, 2004</h3>
          </section>
          <section>
            <p>First version</p>
            <pre><code class="php">function __autoload($class) {
  $file = some_logic($class);
  include $file;
}</code></pre>
            <div class="fragment">
              <p>Useful version</p>
              <pre><code class="php">spl_autoload_register('myproject_autoloader');

function myproject_autoloader($class) {
  $file = some_logic($class);
  include $file;
}</code></pre>
            </div>
          </section>
          <section>
            <h3>Why we can't have nice things</h3>
            <dl class="bullets">
              <dt>Where do I find code?</dt>
              <dd>PEAR and, um, blogs?</dd>
              <dt>How do I get code?</dt>
              <dd>Paste into your repository (or have root)</dd>
              <dt>How do I load your code?</dt>
              <dd class="done">Autloading</dd>
              <dt>How do I load everyone's code?</dt>
              <dd>Lots of manual includes</dd>
              <dt>Name clashes?</dt>
              <dd>YourProject_Before_Every_Single_Function()</dd>
              <dt>How can I collaborate on code?</dt>
              <dd>Sourceforge?</dd>
              <dt>Can I exchange code?</dt>
              <dd>LOLz</dd>
            </dl>
          </section>
        </section>
        <section>
          <section>
            <h1>Step 1</h1>
          </section>
          <section>
            <h2>GitHub</h2>
            <h3>2008</h3>
          </section>
          <section>
            <img src="assets/octocat.png" style="width: 60%;" alt="GitHub's OctoCat" />
            <p><q>Build software better, together</q></p>
          </section>
          <section>
            <img src="assets/github-symfony.png" alt="The Symfony project on GitHub" />
            <p>Like Drupal.org, but for everyone!</p>
          </section>
          <section>
            <p>Better than Sourceforge et al by a wide margin.</p>
          </section>
          <section>
            <h3>Why we can't have nice things</h3>
            <dl class="bullets">
              <dt>Where do I find code?</dt>
              <dd>PEAR and, um, blogs?</dd>
              <dt>How do I get code?</dt>
              <dd>Paste into your repository (or have root)</dd>
              <dt>How do I load your code?</dt>
              <dd class="done">Autloading</dd>
              <dt>How do I load everyone's code?</dt>
              <dd>Lots of manual includes</dd>
              <dt>Name clashes?</dt>
              <dd>YourProject_Before_Every_Single_Function()</dd>
              <dt>How can I collaborate on code?</dt>
              <dd class="done">GitHub</dd>
              <dt>Can I exchange code?</dt>
              <dd>LOLz</dd>
            </dl>
          </section>
        </section>
        <section>
          <section>
            <h1>Step 2</h1>
          </section>
          <section>
            <h2>Namespaces</h2>
            <h3>PHP 5.3, June 2009</h3>
          </section>
          <section>
            <h3>Before</h3>
            <pre><code class="php">class Zend_Form {}

class Application_Form_Guestbook extends Zend_Form {}

class sfForm() {}
</code></pre>
            <div class="fragment">
              <p>Oh PEAR...</p>
              <pre><code class="php">class Structures_DataGrid_DataSource_CSV {}

class Structures_DataGrid_DataSource_CSV_Memory
    extends Structures_DataGrid_DataSource_CSV {}
</code></pre>
            </div>
          </section>
          <section>
            <h3>After</h3>
            <pre><code class="php">namespace Zend\Form;

class Factory{}
</code></pre>
<pre class="fragment"><code class="php">namespace Zend\Form;

use Zend\Captcha;

$factory = new Factory();
$captcha = new Captcha();
</code></pre>
<pre class="fragment"><code class="php">namespace Zend\Form;

use Zend\Captcha;
use Guzzle\Http\Client;

$factory = new Factory();
$captcha = new Captcha();
$guzzle = new Client();
</code></pre>
          </section>
          <section>
            <h3>Why we can't have nice things</h3>
            <dl class="bullets">
              <dt>Where do I find code?</dt>
              <dd>PEAR and, um, blogs?</dd>
              <dt>How do I get code?</dt>
              <dd>Paste into your repository (or have root)</dd>
              <dt>How do I load your code?</dt>
              <dd class="done">Autloading</dd>
              <dt>How do I load everyone's code?</dt>
              <dd>Lots of manual includes</dd>
              <dt>Name clashes?</dt>
              <dd class="done">Namespaces</dd>
              <dt>How can I collaborate on code?</dt>
              <dd class="done">GitHub</dd>
              <dt>Can I exchange code?</dt>
              <dd>LOLz</dd>
            </dl>
          </section>
        </section>
        <section>
          <section>
            <h1>Step 3</h1>
          </section>
          <section>
            <h2>The PHP Standards Group</h2>
            <h3>php|tek, May 2009</h3>
          </section>
          <section>
            <img src="assets/smoke-filled-room.jpg" alt="The smoke filled room where FIG was founded." data-credit="http://www.flickr.com/photos/poagao/23385812/" />
            <p class="fragment">(Smoke not guaranteed)</p>
          </section>
          <section>
            <q>We're going to have these namespace things,<br />let's use them the same way for a change!</q>
          </section>
          <section>
            <h2>PSR-0</h2>
            <ul>
              <li class="fragment">One autoloading standard/convention</li>
              <li class="fragment">Java-inspired</li>
              <li class="fragment">PEAR-inspired</li>
              <li class="fragment">Rudimentary, but enough</li>
            </ul>
          </section>
          <section>
            <h2>PSR-0</h2>
            <pre><code class="php">$root = '/some/root/path';

spl_autoload_register(function($class_name) use ($root) {
  $className = ltrim($className, '\\');
  if ($lastNsPos = strrpos($className, '\\')) {
    $namespace = substr($className, 0, $lastNsPos);
    $className = substr($className, $lastNsPos + 1);
    $fileName  = str_replace('\\', '/', $namespace) . '/';
  }
  $fileName .= str_replace('_', '/', $className) . '.php';

  $require $root . '/' . $fileName;
}

new Guzzle\Http\Client;
// require('/some/root/path/Guzzle/HttpClient.php');
</code></pre>
          </section>
          <section>
            <h1>Worst</h1>
            <h1 class="fragment">Launch</h1>
            <h1 class="fragment">Ever</h1>
          </section>
          <section>
            <p>Thrown off lists.php.net, moved to Google</p>
            <p class="fragment">Admitted a few new projects</p>
            <p class="fragment">Slept through 2010</p>
            <p class="fragment">Debated a lot in 2011</p>
          </section>
          <section>
            <h3>Why we can't have nice things</h3>
            <dl class="bullets">
              <dt>Where do I find code?</dt>
              <dd>PEAR and, um, blogs?</dd>
              <dt>How do I get code?</dt>
              <dd>Paste into your repository (or have root)</dd>
              <dt>How do I load your code?</dt>
              <dd class="done">Autloading</dd>
              <dt>How do I load everyone's code?</dt>
              <dd class="done">PSR-0</dd>
              <dt>Name clashes?</dt>
              <dd class="done">Namespaces</dd>
              <dt>How can I collaborate on code?</dt>
              <dd class="done">GitHub</dd>
              <dt>Can I exchange code?</dt>
              <dd>LOLz</dd>
            </dl>
          </section>
        </section>
        <section>
          <section>
            <h1>Step 4</h1>
          </section>
          <section>
            <h2>Composer</h2>
            <h3>2011/2012</h3>
          </section>
          <section>
            <h2>Symfony 2.0</h2>
            <ul>
              <li class="fragment">Initial alpha, Symfony Live Paris, February 2010</li>
              <li class="fragment">PHPBB: We're rebuilding on it!</li>
              <li class="fragment">Symfony2 uses 3rd party libs (Doctrine, Monolog)</li>
            </ul>
          </section>
          <section>
            <h2>Dependency Hell</h2>
            <img src="assets/hell-fire.jpg" alt="Dependencies are hell" data-credit="http://www.flickr.com/photos/31653823@N00/471628209" />
          </section>
          <section>
            <h2>We need a dependency system!</h2>
            <div class="fragment">
              <q>It's dumb to make it Symfony specific</q>
              <p>&mdash;Jordi Boggiano</p>
            </div>
          </section>
          <section>
            <h2>April 2011</h2>
            <p class="fragment">Nils Aderman (PHPBB): libzypp -> PHP</p>
            <p class="fragment">Jordi Boggiano (Monolog): Packagist, front-end for PEAR</p>
          </section>
          <section>
            <h2>With their powers combined...</h2>
            <p><strong>Composer</strong> is a tool for <em>dependency management</em> in PHP. It allows you to declare the dependent libraries your project needs and it will install them in your project for you.</p>
          </section>
          <section>
            <h2>Uhh, what?</h2>
            <ul>
              <li class="fragment">No more Copy/Paste of libraries</li>
              <li class="fragment">Resolves dependencies</li>
              <li class="fragment">Each project defines its own requirements</li>
              <li class="fragment">Performs build tasks</li>
            </ul>
          </section>
          <section>
            <h2>September 2011</h2>
            <p><a href="http://packagist.org/">Packagist.org</a></p>
            <blockquote>I'd say until early 2012 it was pretty unusable, yet people used it. I guess that's how badly it was needed.</blockquote>
            <p>&mdash; Jordi Boggiano</p>
          </section>
          <section>
            <h2>Symfony 2.1</h2>
            <p>September 2012</p>
            <p>Composer from the ground up</p>
          </section>
          <section>
            <h2>Package count</h2>
            <img src="assets/packagist-usage.png" alt="Number of packages on Packagist over time" />
            <p>April 2013: 10,000 packages</p>
            <p>(Not just Symfony!)</p>
          </section>
          <section>
          <h2>Get Composer</h2>
          <pre><code class="no-highlight">
# Quick-n-easy:
$ curl -sS https://getcomposer.org/installer | php

# Global
$ curl -sS https://getcomposer.org/installer | php -- --install-dir=bin
</code></pre>
          </section>
          <section>
            <h2>composer.json</h2>
            <p>Base manifest file for your project</p>
            <pre><code class="json">{
    "name": "crell/myapp",
    "description": "This app is amazing.",
    "require": {
        "guzzle/guzzle": "3.4.*"
    },
    "autoload": {
        "psr-0": {
            "MyName\\MyPackage": "src/"
        }
    }
}</code></pre>
          </section>
          <section>
            <h2>composer install</h2>
            <p>Installs all dependencies for your project</p><pre><code class="no-highlight">
$ composer.phar install
Loading composer repositories with package information
Installing dependencies (including require-dev)
  - Installing symfony/event-dispatcher (v2.3.1)
    Downloading: 100%

  - Installing guzzle/guzzle (v3.4.3)
    Downloading: 100%

symfony/event-dispatcher suggests installing symfony/dependency-injection ()
symfony/event-dispatcher suggests installing symfony/http-kernel ()
Writing lock file
Generating autoload files
</code></pre>
          </section>
          <section>
            <h2>index.php</h2>
            <pre><code class="php">require_once __DIR__ . '/vendor/autoload.php';

// Every class is now yours to command!

// Autoload on demand! Your work: zero.
$client = new Guzzle\Http\Client('https://api.github.com');
$request = $client->get('/user')->setAuth('user', 'pass');
$response = $request->send();
echo $response->getBody();
  </code></pre>
          </section>
          <section>
            <h3>Why we can't have nice things</h3>
            <dl class="bullets">
              <dt>Where do I find code?</dt>
              <dd class="done">Packagist.org</dd>
              <dt>How do I get code?</dt>
              <dd class="done">Composer</dd>
              <dt>How do I load your code?</dt>
              <dd class="done">Autloading</dd>
              <dt>How do I load everyone's code?</dt>
              <dd class="done">PSR-0</dd>
              <dt>Name clashes?</dt>
              <dd class="done">Namespaces</dd>
              <dt>How can I collaborate on code?</dt>
              <dd class="done">GitHub</dd>
              <dt>Can I exchange code?</dt>
              <dd>LOLz</dd>
            </dl>
          </section>
        </section>
        <section>
          <section>
            <h1>Step 5</h1>
          </section>
          <section>
            <h2>Common interfaces</h2>
            <h3>2012-Present</h3>
          </section>
          <section>
            <h2>PHP-FIG</h2>
            <p class="fragment"><q>The organization formerly known as the<br />PHP Standards Group and now represented by this web site</q></p>
            <p class="fragment">Became useful in 2012</p>
            <p class="fragment">Renamed to PHP Framework Interoperability Group, June 2012</p>
            <p class="fragment">New (first?) actual process definition, July 2013</p>
          </section>
          <section>
            <h2>PSR-3</h2>
            <p class="fragment">Standard logger interface</p>
            <p class="fragment">Inspired by Monolog <span class="fragment">... and Drupal</span></p>
          </section>
          <section>
            <h3>PSR-3</h3>
            <pre><code class="php">namespace Psr\Log;

interface LoggerInterface {
  public function log($level, $message, array $context = array());

  public function emergency($message, array $context = array());
  public function alert($message, array $context = array());
  public function critical($message, array $context = array());
  public function error($message, array $context = array());
  public function warning($message, array $context = array());
  public function notice($message, array $context = array());
  public function info($message, array $context = array());
  public function debug($message, array $context = array());
}</code></pre>
          </section>
          <section>
            <h2>Cache PSR</h2>
            <p>Stay tuned... ;-)</p>
          </section>
          <section>
            <h3>Yes, we <em>can</em> have nice things</h3>
            <dl class="bullets">
              <dt>Where do I find code?</dt>
              <dd class="done">Packagist.org</dd>
              <dt>How do I get code?</dt>
              <dd class="done">Composer</dd>
              <dt>How do I load your code?</dt>
              <dd class="done">Autloading</dd>
              <dt>How do I load everyone's code?</dt>
              <dd class="done">PSR-0</dd>
              <dt>Name clashes?</dt>
              <dd class="done">Namespaces</dd>
              <dt>How can I collaborate on code?</dt>
              <dd class="done">GitHub</dd>
              <dt>Can I exchange code?</dt>
              <dd class="done">PHP-FIG standard interfaces</dd>
            </dl>
          </section>
        </section>
        <section>
          Drupal/Symfony
        </section>
        <section>
          Symfony 2.3 includes Zend components (Er, doesn't seem to?)
        </section>
        <section>
          We are no longer islands.
          <img src="assets/drupal-island.jpg" alt="Drupal Island" data-credit="http://deeson-online.co.uk/blog/could-be-mythical-drupal-island" />
        </section>
        <section>
          <img src="assets/african-proverb.jpg" alt="If you want to go fast, go alone. If you want to go far, go together." data-credit="http://fibreoflife.blogspot.com/2013/01/new-year-together.html" />
        </section>
        <section>
          <p>Our world is changing fast.</p>
          <p class="fragment" style="margin-top: 1em;">Let's go somewhere together.</p>
        </section>
      </div>
    </div>
    <script type="text/javascript" src="components/require.js" data-main="island"></script>
  </body>
</html>
